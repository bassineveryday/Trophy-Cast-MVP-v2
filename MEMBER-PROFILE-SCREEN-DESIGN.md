# üìã Member Profile Screen Component - Design Preview

**Status:** Information Only (Not Yet Implemented)  
**Date:** October 18, 2025

---

## üîç RESEARCH FINDINGS - Supabase Data Structure

### Database Tables with Member Data:

**1. `aoy_standings` Table** ‚úÖ (Has member names)
```sql
- member_id (text) - e.g., "DBM019"
- member_name (text) - e.g., "Tai Hunt"
- aoy_rank (number) - Current season rank
- total_aoy_points (number) - Points accumulated
- season_year (number) - e.g., 2025
- club_id (optional)
```

**2. `tournament_results` Table** ‚úÖ (Performance data)
```sql
- member_id (text)
- event_date (date)
- lake (string)
- tournament_name (string)
- place (number) - Tournament placement
- weight_lbs (number) - Total catch weight
- aoy_points (number)
- cash_payout (string/number)
- big_fish (number)
```

**3. `tournament_members` Table** ‚úÖ
```sql
- member_id (text PRIMARY KEY)
- name (text)
- hometown (text)
- email (text)
- phone (text)
- created_at (timestamp)
```

**4. `profiles` Table**
```sql
- id (UUID)
- member_code (text) - e.g., "DBM019"
- name (text)
- hometown (text)
- avatar_url (optional)
- created_at (timestamp)
```

---

## üé® Member Profile Screen Component

### Location & Structure:
**File:** `screens/MemberProfileScreen.tsx` (NEW FILE)

### Component Signature:
```tsx
interface MemberProfileScreenProps {
  route?: {
    params?: {
      member_id: string;  // e.g., "DBM019"
      member_name?: string; // e.g., "Tai Hunt"
    }
  }
}

export function MemberProfileScreen({ route }: MemberProfileScreenProps) {
  const member_id = route?.params?.member_id;
  // ...
}
```

---

## üìê UI Layout & Sections

### **SECTION 1: HERO HEADER**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                     ‚îÇ
‚îÇ      [Member Avatar/Photo]          ‚îÇ
‚îÇ                                     ‚îÇ
‚îÇ  Member Name (e.g., Tai Hunt)       ‚îÇ
‚îÇ  DBM019 ‚Ä¢ DBM Secretary             ‚îÇ ‚Üê From board role
‚îÇ                                     ‚îÇ
‚îÇ  ‚≠ê AOY Rank: #2 (1,250 pts)        ‚îÇ ‚Üê From aoy_standings
‚îÇ                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Data Fetched:**
- From `aoy_standings`: member_name, aoy_rank, total_aoy_points
- From ClubInfo BOARD_MEMBERS: member_role (if board member)

---

### **SECTION 2: STATS GRID** (2x2 or 1x4)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üé£ Total Catches    ‚îÇ  üèÜ Best Place    ‚îÇ
‚îÇ       15              ‚îÇ       2nd         ‚îÇ
‚îÇ                       ‚îÇ                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚öñÔ∏è  Best Weight      ‚îÇ  üí∞ Earnings      ‚îÇ
‚îÇ    18.5 lbs          ‚îÇ    $450.00        ‚îÇ
‚îÇ                      ‚îÇ                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Data Fetched:**
- Total Catches: COUNT from tournament_results where member_id = "DBM019"
- Best Place: MIN(place) from tournament_results
- Best Weight: MAX(weight_lbs) from tournament_results
- Earnings: SUM(cash_payout) from tournament_results

---

### **SECTION 3: TOURNAMENT HISTORY**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Tournament Results (Scrollable)    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üé£ Pueblo Lake Championship        ‚îÇ
‚îÇ    Oct 12, 2025 ‚Ä¢ Pueblo Lake       ‚îÇ
‚îÇ    2nd Place ‚Ä¢ 18.5 lbs ‚Ä¢ 50 pts    ‚îÇ
‚îÇ    Earnings: $250                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üé£ Cherry Creek Open               ‚îÇ
‚îÇ    Sep 28, 2025 ‚Ä¢ Cherry Creek      ‚îÇ
‚îÇ    5th Place ‚Ä¢ 15.2 lbs ‚Ä¢ 35 pts    ‚îÇ
‚îÇ    Earnings: $100                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üé£ Bear Lake Tournament             ‚îÇ
‚îÇ    Sep 14, 2025 ‚Ä¢ Bear Lake         ‚îÇ
‚îÇ    3rd Place ‚Ä¢ 16.8 lbs ‚Ä¢ 42 pts    ‚îÇ
‚îÇ    Earnings: $180                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Data Fetched:**
- From `tournament_results`: 
  - Ordered by event_date DESC (most recent first)
  - Limit: 10-15 results
  - Fields: tournament_name, event_date, lake, place, weight_lbs, aoy_points, cash_payout

---

### **SECTION 4: SEASON SUMMARY** (Optional)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2025 Season Summary                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Total Tournaments: 8               ‚îÇ
‚îÇ  Average Place: 3.5                 ‚îÇ
‚îÇ  Total Weight: 127.3 lbs            ‚îÇ
‚îÇ  Season Earnings: $1,050.00         ‚îÇ
‚îÇ  AOY Points: 1,250                  ‚îÇ
‚îÇ  Current Rank: #2                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîå React Query Hooks Needed

### **New Hook: `useMemberProfile(memberId: string)`**
```tsx
export function useMemberProfile(memberId: string) {
  return useQuery({
    queryKey: ['member-profile', memberId],
    queryFn: async () => {
      // Get AOY standing
      const { data: aoyData } = await fetchAOYStandingsByMember(memberId);
      
      // Get tournament results
      const { data: results } = await supabase
        .from('tournament_results')
        .select('*')
        .eq('member_id', memberId)
        .order('event_date', { ascending: false });
      
      return {
        aoy: aoyData,
        tournaments: results || [],
      };
    },
  });
}
```

### **Where to Add:**
File: `lib/hooks/useQueries.ts` (already has similar hooks)

---

## üß© Component Implementation Outline

```tsx
/**
 * MemberProfileScreen.tsx - Individual member profile & tournament history
 * 
 * Displays:
 * - Member info (name, role, avatar)
 * - AOY rank & points
 * - Performance stats (catches, best place, earnings, etc)
 * - Tournament history list
 * - Season summary
 */

import React from 'react';
import { View, Text, ScrollView, StyleSheet, ActivityIndicator } from 'react-native';
import { useMemberProfile } from '../lib/hooks/useQueries';
import { COLORS } from '../theme/colors'; // Navy + Gold theme

export function MemberProfileScreen({ route }) {
  const memberId = route?.params?.member_id;
  const { data: profile, isLoading, error } = useMemberProfile(memberId);

  if (isLoading) {
    return (
      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>
        <ActivityIndicator size="large" color={COLORS.gold} />
      </View>
    );
  }

  if (error || !profile) {
    return (
      <View style={styles.container}>
        <Text style={styles.errorText}>Failed to load member profile</Text>
      </View>
    );
  }

  const { aoy, tournaments } = profile;

  return (
    <ScrollView style={styles.container} contentContainerStyle={styles.content}>
      {/* 1. HERO HEADER */}
      <View style={styles.heroSection}>
        <Text style={styles.memberName}>{aoy?.member_name}</Text>
        <Text style={styles.memberId}>{memberId}</Text>
        <Text style={styles.memberRole}>DBM Secretary</Text>
        
        <View style={styles.aoyBadge}>
          <Text style={styles.aoyText}>
            ‚≠ê Rank #{aoy?.aoy_rank} ‚Ä¢ {aoy?.total_aoy_points} pts
          </Text>
        </View>
      </View>

      {/* 2. STATS GRID */}
      <View style={styles.statsGrid}>
        <StatCard
          icon="üé£"
          label="Total Catches"
          value={tournaments?.length || 0}
        />
        <StatCard
          icon="üèÜ"
          label="Best Place"
          value={Math.min(...tournaments.map(t => t.place)) || 'N/A'}
        />
        <StatCard
          icon="‚öñÔ∏è"
          label="Best Weight"
          value={`${Math.max(...tournaments.map(t => t.weight_lbs || 0))} lbs`}
        />
        <StatCard
          icon="üí∞"
          label="Total Earnings"
          value={`$${tournaments.reduce((sum, t) => sum + (t.cash_payout || 0), 0).toFixed(2)}`}
        />
      </View>

      {/* 3. TOURNAMENT HISTORY */}
      <View style={styles.tournamentsSection}>
        <Text style={styles.sectionTitle}>Tournament History</Text>
        {tournaments.map((tournament, idx) => (
          <TournamentResultCard key={idx} result={tournament} />
        ))}
      </View>

      {/* 4. SEASON SUMMARY */}
      <View style={styles.summarySection}>
        <Text style={styles.sectionTitle}>2025 Season</Text>
        <SummaryRow label="Tournaments" value={tournaments.length} />
        <SummaryRow 
          label="Total Weight" 
          value={`${tournaments.reduce((sum, t) => sum + (t.weight_lbs || 0), 0)} lbs`} 
        />
        <SummaryRow 
          label="Earnings" 
          value={`$${tournaments.reduce((sum, t) => sum + (t.cash_payout || 0), 0).toFixed(2)}`} 
        />
      </View>
    </ScrollView>
  );
}

// Sub-components...
function StatCard({ icon, label, value }) {
  return (
    <View style={styles.statCard}>
      <Text style={styles.statIcon}>{icon}</Text>
      <Text style={styles.statLabel}>{label}</Text>
      <Text style={styles.statValue}>{value}</Text>
    </View>
  );
}

function TournamentResultCard({ result }) {
  return (
    <View style={styles.resultCard}>
      <View style={styles.resultHeader}>
        <Text style={styles.tournamentName}>{result.tournament_name}</Text>
        <Text style={styles.place}>Place: #{result.place}</Text>
      </View>
      <Text style={styles.resultMeta}>
        {result.event_date} ‚Ä¢ {result.lake}
      </Text>
      <View style={styles.resultStats}>
        <Text style={styles.weight}>{result.weight_lbs} lbs</Text>
        <Text style={styles.points}>{result.aoy_points} pts</Text>
        <Text style={styles.earnings}>${result.cash_payout || 0}</Text>
      </View>
    </View>
  );
}

// Styles...
const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: COLORS.navy,
  },
  // ... define all styles here
});
```

---

## üîó Navigation Integration

### **Where to Add Route:**

**File:** `app.json` or `RootNavigator.tsx`

```tsx
// Add to stack navigator or modal:
<Stack.Screen
  name="MemberProfile"
  component={MemberProfileScreen}
  options={{
    headerShown: true,
    headerTitle: 'Member Profile',
    headerTintColor: COLORS.gold,
    headerStyle: { backgroundColor: COLORS.navy },
  }}
/>
```

### **How to Navigate from Board Member:**

**In ClubInfo.tsx (inside board member press handler):**
```tsx
const navigation = useNavigation();

const handleBoardMemberPress = (memberName: string) => {
  navigation.navigate('MemberProfile', {
    member_id: memberIdLookup[memberName], // Need to map names to IDs
    member_name: memberName,
  });
};
```

---

## üìä Data Flow Diagram

```
MemberProfileScreen (component)
    ‚Üì
useMemberProfile(member_id) (hook)
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  fetchAOYStandings  ‚îÇ ‚Üê Get rank, points, member_name
‚îÇ  (existing hook)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ tournament_results  ‚îÇ ‚Üê Get all tournaments for member
‚îÇ .eq('member_id')    ‚îÇ
‚îÇ .order('event_date')‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üì
Display in UI:
- Hero section (name, rank, points)
- Stats grid (catches, best place, earnings)
- Tournament list (scrollable history)
- Season summary (totals)
```

---

## ‚úÖ What's Already Available

These reusable utilities already exist:

1. **Query Functions:**
   - `fetchAOYStandings()` - gets standings with member names ‚úÖ
   - `fetchAOYStandingsByMember(memberId)` - gets single member ranking ‚úÖ

2. **Hooks (useQueries.ts):**
   - `useAOYStandings()` - React Query wrapper ‚úÖ
   - Similar query patterns already established ‚úÖ

3. **Components:**
   - Card components with Navy + Gold theme ‚úÖ
   - TopBar with back button ‚úÖ
   - ScrollView layouts ‚úÖ

4. **Navigation:**
   - useNavigation hook available ‚úÖ
   - BottomTabs already set up ‚úÖ

---

## üéØ Summary

### To Implement Member Profiles:

**New Files Needed:**
1. `screens/MemberProfileScreen.tsx` (main component)
2. Update `lib/hooks/useQueries.ts` (add useMemberProfile hook)

**Files to Modify:**
1. `features/club/ClubInfo.tsx` (add press handlers to board members)
2. Navigation config (add MemberProfile route)

**Data Already Available:**
- ‚úÖ All required Supabase tables exist
- ‚úÖ Query functions are ready
- ‚úÖ Theme colors defined
- ‚úÖ UI component patterns established

**User Flow:**
```
User taps board member in Club tab
    ‚Üì
Pressed: "Tai Hunt" (DBM019)
    ‚Üì
Navigate to MemberProfileScreen
    ‚Üì
Load: AOY ranking + tournament history
    ‚Üì
Display: Profile card + stats + tournament list
```

---

## üí° Key Design Decisions

1. **Reuse existing hooks** - No need to reinvent data fetching
2. **Navy + Gold theme** - Match existing app styling
3. **Scrollable list** - Handle many tournament results
4. **Loading states** - Show spinner while fetching
5. **Error handling** - Graceful fallback if data missing

This design leverages what's already built and follows the established patterns in your app! üé£
